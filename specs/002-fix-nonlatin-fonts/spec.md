# Feature Specification: 非英語文字表示対応

**Feature Branch**: `002-fix-nonlatin-fonts`  
**Created**: 2026-01-08  
**Status**: Draft  
**Input**: User description: "日本語など、英語以外の言語に対応する。現状は豆腐になっている"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 非英語テキストの閲覧 (Priority: P1)

ユーザーがアプリ内の表示領域で日本語などの非英語テキストを見ても、文字が豆腐にならず読み取れる。

**Why this priority**: 表示が読めない状態は主要タスクの成立を阻害するため、最優先で解決する必要がある。

**Independent Test**: 非英語テキストを含む画面を開き、文字が読めることを確認するだけで価値を提供できる。

**Acceptance Scenarios**:

1. **Given** 翻訳結果に日本語テキストが含まれている, **When** 画面に表示する, **Then** すべての文字が豆腐にならずに可読である
2. **Given** 非英語(例: キリル文字やアラビア文字)を含む混在テキストがある, **When** 表示する, **Then** 文字欠けや豆腐が発生しない
3. **Given** 非英語テキストが表示されている, **When** コピーして他の場所へ貼り付ける, **Then** 文字が欠落せず元の内容と一致する

---

### User Story 2 - 非英語入力の編集 (Priority: P2)

ユーザーが入力欄に非英語テキストを入力・貼り付けしても、入力中の文字が正しく表示される。

**Why this priority**: 入力中に読めないと作業が継続できず、翻訳や編集が成立しないため。

**Independent Test**: 入力欄に非英語テキストを貼り付けて表示を確認すれば、単独で価値を提供できる。

**Acceptance Scenarios**:

1. **Given** 空の入力欄がある, **When** 日本語テキストを貼り付ける, **Then** 入力欄内の文字が豆腐にならずに表示される

---

### User Story 3 - 履歴・一覧での表示 (Priority: P3)

ユーザーが履歴や一覧などのサマリ表示で非英語テキストを見ても、同様に可読である。

**Why this priority**: 過去の結果確認や再利用の場面でも表示品質が維持される必要がある。

**Independent Test**: 履歴/一覧ビューに非英語テキストを含む項目を表示し、可読性を確認できる。

**Acceptance Scenarios**:

1. **Given** 履歴一覧に非英語テキストを含む項目がある, **When** 一覧画面を表示する, **Then** 文字が豆腐にならない

---

### Edge Cases

- 日本語・英語・絵文字が混在する長文でも可読性が維持されるか
- 画面幅が狭い場合に改行が発生しても文字が崩れないか
- 一部の文字が対応外の場合にアプリがクラッシュせず、読み取り可能な状態を保てるか

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムはアプリ内のすべてのユーザー表示領域で、非英語テキストが豆腐にならず表示されなければならない
- **FR-002**: システムは日本語・英語・絵文字などの混在テキストを欠落なく表示しなければならない
- **FR-003**: ユーザーは非英語テキストを入力欄で入力・貼り付け・編集できなければならない
- **FR-004**: システムは履歴/一覧などの集約表示でも非英語テキストを可読な状態で表示しなければならない
- **FR-005**: ユーザーが非英語テキストをコピーして他の場所へ貼り付けても、文字が欠落しない状態を維持しなければならない

### Assumptions

- 対象範囲はアプリ内のすべてのユーザー表示領域(入力、出力、履歴、設定、ダイアログ等)とする
- 既存の機能仕様(翻訳の言語対応など)は変更せず、表示品質の改善にフォーカスする

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 代表テキストセット(日本語・中国語(簡体/繁体)・韓国語・アラビア語・キリル文字・アクセント付きラテン・絵文字)を含む画面表示で、豆腐が0件である
- **SC-002**: 日本語入力を伴う主要タスクで、90%のユーザーが表示の問題なく完了できる
- **SC-003**: 非英語テキストのコピー&ペーストの往復テストで文字欠落が0件である
- **SC-004**: リリース後1か月で「文字が読めない/豆腐」関連の問い合わせが80%減少する
